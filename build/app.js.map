{"version":3,"file":"main.js","sources":["src/js/lib/qsa.js","src/js/main.js"],"sourcesContent":["var $ = (s, d = document) => Array.prototype.slice.call(d.querySelectorAll(s));\n\n$.one = (s, d = document) => d.querySelector(s);\n\nmodule.exports = $;","var $ = require(\"./lib/qsa\");\n\nvar blocks = $(\"section.slide\").reverse();\nvar current = null;\n\nfunction update() {\n  for (var block of blocks) {\n    var bounds = block.getBoundingClientRect();\n    if (bounds.top < window.innerHeight * .85) {\n      if (current) {\n        if (current == block) return;\n        blocks.forEach(b => b.classList.remove(\"exiting\"));\n        current.classList.remove(\"active\", \"entering\");\n        current.classList.add(\"exiting\");\n      }\n      current = block;\n      current.classList.remove(\"exiting\");\n      current.classList.add(\"active\", \"entering\");\n      var index = blocks.indexOf(block);\n      var lazy = [-1, 0, 1, 2].map(n => blocks[index + n]).filter(b => b);\n      for (var section of lazy) {\n        var items = section.querySelectorAll(\"[data-src]\");\n        for (var item of items) {\n          item.src = item.dataset.src;\n          item.removeAttribute(\"data-src\");\n        }\n      }\n      return;\n    }\n  }\n}\n\nwindow.addEventListener(\"scroll\", update);\nupdate();"],"names":["$","s","d","document","Array","prototype","slice","call","querySelectorAll","one","querySelector","qsa","require$$0","blocks","reverse","current","update","block","bounds","getBoundingClientRect","top","window","innerHeight","forEach","b","classList","remove","add","index","indexOf","lazy","map","n","filter","section","items","item","src","dataset","removeAttribute","addEventListener"],"mappings":";;;;;;;;EAAA,IAAIA,GAAC,GAAG,UAACC,CAAD,EAAA;EAAA,EAAIC,IAAAA,CAAJ,uEAAQC,QAAR,CAAA;EAAA,EAAA,OAAqBC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BL,CAAC,CAACM,gBAAF,CAAmBP,CAAnB,CAA3B,CAArB,CAAA;EAAA,CAAR,CAAA;;AAEAD,KAAC,CAACS,GAAF,GAAQ,UAACR,CAAD,EAAA;EAAA,EAAIC,IAAAA,CAAJ,uEAAQC,QAAR,CAAA;EAAA,EAAA,OAAqBD,CAAC,CAACQ,aAAF,CAAgBT,CAAhB,CAArB,CAAA;EAAA,CAAR,CAAA;;EAEA,IAAAU,GAAc,GAAGX,GAAjB;;ECJA,IAAIA,CAAC,GAAGY,GAAR,CAAA;EAEA,IAAIC,MAAM,GAAGb,CAAC,CAAC,eAAD,CAAD,CAAmBc,OAAnB,EAAb,CAAA;EACA,IAAIC,OAAO,GAAG,IAAd,CAAA;;EAEA,SAASC,MAAT,GAAkB;EAChB,EAAA,KAAK,IAAIC,KAAT,IAAkBJ,MAAlB,EAA0B;EACxB,IAAA,IAAIK,MAAM,GAAGD,KAAK,CAACE,qBAAN,EAAb,CAAA;;EACA,IAAID,IAAAA,MAAM,CAACE,GAAP,GAAaC,MAAM,CAACC,WAAP,GAAqB,GAAtC,EAA2C;EACzC,MAAA,IAAIP,OAAJ,EAAa;EACX,QAAIA,IAAAA,OAAO,IAAIE,KAAf,EAAsB,OAAA;EACtBJ,QAAAA,MAAM,CAACU,OAAP,CAAeC,CAAC,IAAIA,CAAC,CAACC,SAAF,CAAYC,MAAZ,CAAmB,SAAnB,CAApB,CAAA,CAAA;EACAX,QAAAA,OAAO,CAACU,SAAR,CAAkBC,MAAlB,CAAyB,QAAzB,EAAmC,UAAnC,CAAA,CAAA;EACAX,QAAAA,OAAO,CAACU,SAAR,CAAkBE,GAAlB,CAAsB,SAAtB,CAAA,CAAA;EACD,OAAA;;EACDZ,MAAAA,OAAO,GAAGE,KAAV,CAAA;EACAF,MAAAA,OAAO,CAACU,SAAR,CAAkBC,MAAlB,CAAyB,SAAzB,CAAA,CAAA;EACAX,MAAAA,OAAO,CAACU,SAAR,CAAkBE,GAAlB,CAAsB,QAAtB,EAAgC,UAAhC,CAAA,CAAA;EACA,MAAA,IAAIC,KAAK,GAAGf,MAAM,CAACgB,OAAP,CAAeZ,KAAf,CAAZ,CAAA;EACA,MAAA,IAAIa,IAAI,GAAG,CAAC,CAAC,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,CAAA,CAAcC,GAAd,CAAkBC,CAAC,IAAInB,MAAM,CAACe,KAAK,GAAGI,CAAT,CAA7B,CAA0CC,CAAAA,MAA1C,CAAiDT,CAAC,IAAIA,CAAtD,CAAX,CAAA;;EACA,MAAA,KAAK,IAAIU,OAAT,IAAoBJ,IAApB,EAA0B;EACxB,QAAA,IAAIK,KAAK,GAAGD,OAAO,CAAC1B,gBAAR,CAAyB,YAAzB,CAAZ,CAAA;;EACA,QAAA,KAAK,IAAI4B,IAAT,IAAiBD,KAAjB,EAAwB;EACtBC,UAAAA,IAAI,CAACC,GAAL,GAAWD,IAAI,CAACE,OAAL,CAAaD,GAAxB,CAAA;EACAD,UAAAA,IAAI,CAACG,eAAL,CAAqB,UAArB,CAAA,CAAA;EACD,SAAA;EACF,OAAA;;EACD,MAAA,OAAA;EACD,KAAA;EACF,GAAA;EACF,CAAA;;EAEDlB,MAAM,CAACmB,gBAAP,CAAwB,QAAxB,EAAkCxB,MAAlC,CAAA,CAAA;EACAA,MAAM,EAAA;;;;;;;;"}